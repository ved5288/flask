<!doctype html>
<html>
<head>

<title> Information </title>

  <h1>Personal Information</h1>

<script>
function register()
{
	var registration_request=new XMLHttpRequest()
	registration_request.onreadystatechange=function()
	{
		if(registration_request.readyState==4)
		{
			if (registration_request.status==200)
			{
				var registration_status=JSON.parse(registration_request.responseText)
				document.getElementById("registration_status").innerHTML=registration_status.result
			}
			else
			{
				alert("An error has occured")
			}
		}
	}
	var firstname		=document.getElementById("firstname").value
	var lastname		=document.getElementById("lastname").value
	var username		=document.getElementById("username").value
	var password		=document.getElementById("password").value
	var email		=document.getElementById("email").value
	var password_matching	=document.getElementById("password_matching").value
	var username_result	=document.getElementById("username_result").value

	registration_request.open("GET","register?username="+username+"&firstname="+firstname+"&lastname="+lastname+"&password="+password+"&email="+email+"&password_matching="+password_matching+"&username_result="+username_result,true)
	registration_request.send(null)

};

function username_check()
{

	var username_check_request=new XMLHttpRequest()
	username_check_request.onreadystatechange=function()
	{
		if(username_check_request.readyState==4)
		{
			if (username_check_request.status==200)
			{
				var username_check_result=JSON.parse(username_check_request.responseText)
				document.getElementById("username_result").innerHTML="Hashed Username : "+username_check_result.result
			}
			else
			{
				alert("An error has occured")
			}
		}
	}
	var username=document.getElementById("username").value
	username_check_request.open("GET","username_check?username="+username,true)
	username_check_request.send(null)
};

function do_passwords_match()
{
	var password_matching_request=new XMLHttpRequest()
	password_matching_request.onreadystatechange=function()
	{	
 		if (password_matching_request.readyState==4)
 		{
  			if (password_matching_request.status==200)
			{
				var password_matching_result=JSON.parse(password_matching_request.responseText)
   				document.getElementById("password_matching").innerHTML=password_matching_result.result
  			}
  			else
  			{
  	 			alert("An error has occured making the request")
  			}
 		}
	}
	var password=document.getElementById("password").value
	var confirm_password=document.getElementById("confirm_password").value
	password_matching_request.open("GET", "password_match?password="+password+"&confirm_password="+confirm_password, true)
	password_matching_request.send(null)
};
</script>

</head>



<body>

<form method="get" action="">

  First Name:<input typt="text" id="firstname" name="firstname" size="25" placeholder="First Name" /><br/><br/>

  Last Name:<input typt="text" id="lastname" name="lastname" size="25" placeholder="Last Name" /><br/><br/>

  Username:<input typt="text" id="username" name="username" size="25" placeholder="username" onchange="username_check()" />

  <div id="username_result"></div><br/>

  Password: <input type="password" id="password" name="password" size="25" placeholder="Type Password"/> <br /><br/>

  Confirm Password: <input type="password" id="confirm_password" name="confirm_password" size="25" placeholder="Type Password Again" onchange="do_passwords_match()"/> 

  <div id="password_matching" name="password_matching">  </div><br />

  Email: <input type="email" id="email" name="email" size="25" placeholder="example@domain.com"/><br/><br/>

  <input type="button" value="Register"/>

</form>

<div id="registration_status">  </div>

</body>
</html>
